name: inspect-agera5

on:
  workflow_dispatch:   # Run manually from the GitHub Actions tab

jobs:
  inspect:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.10"

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install xarray netCDF4 pandas numpy

      - name: Inspect AgERA5 daily dataset
        run: |
          python - <<EOF
          import xarray as xr

          url = "https://objectstore.eea.europa.eu/agera5/t2m_daily/2024.nc"
          print("Opening dataset:", url)

          try:
              ds = xr.open_dataset(url)
          except Exception as e:
              print("ERROR opening dataset:", e)
              raise

          print("\n=== DATASET SUMMARY ===")
          print(ds)

          print("\n=== VARIABLE NAMES ===")
          print(list(ds.variables.keys()))

          print("\n=== COORDINATES ===")
          print(ds.coords)

          print("\n=== ATTRIBUTES ===")
          print(ds.attrs)

          print("\n=== VARIABLE ATTRIBUTES ===")
          for v in ds.variables:
              print(f"\n--- {v} ---")
              print(ds[v].attrs)
          EOF
