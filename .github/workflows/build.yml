name: build

on:
  push:
    paths:
      - "inputs/latest.json"
      - "scripts/**"
      - ".github/workflows/build.yml"

jobs:
  chronomap:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.10"

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install xarray netCDF4 pandas numpy pytz timezonefinder astral matplotlib

      # ---------------------------------------------------------
      # 1. Inspect AgERA5 daily dataset metadata
      # ---------------------------------------------------------
      - name: Inspect AgERA5 daily metadata
        run: |
          python - <<EOF
          import xarray as xr
          url = "https://objectstore.eea.europa.eu/agera5/t2m_daily/2024.nc"
          print("Opening dataset:", url)
          ds = xr.open_dataset(url)
          print("\n=== DATASET SUMMARY ===")
          print(ds)
          print("\n=== VARIABLE NAMES ===")
          print(list(ds.variables.keys()))
          print("\n=== COORDINATES ===")
          print(ds.coords)
          EOF
